#!perl -p0
$w=index$_,"\n";
@t=(index($_,o),index$_,x);
s/[h-l]+//;
for$c(split'',$&){eval's/'.+{l,'(x(.))/ox',h,'((.)x)/xo',k,'((.)(.{$w})x)/x$3o',j,'x(.{$w})(.)/o$1x'}->{$c}.'/s;push@t,index$_,x;$2eq"-"&&substr$_,shift@t,1,"-"'}
