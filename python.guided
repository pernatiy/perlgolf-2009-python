#!perl -p0
use Term::ReadLine;
my $term = new Term::ReadLine 'python';
sub i{index$_,shift}
$w=i"\n";
@t=(i(o),i x);
s/[h-l]+.//s;$c=1;
while ($c) {eval's/'.{l,'(x(.))/ox',h,'((.)x)/xo',k,'((.)(.{$w})x)/x$3o',j,'x(.{$w})(.)/o$1x'}->{$c}.'/s;push@t,i x;$2eq"-"&&substr$_,shift@t,1,"-"';print;chop($c = $term->readline(">>> "));$h.=$c}
print "\n$h\n";
